---
// ========================================
// HERO COMPONENT
// Premium landing-style hero with configurable background
// Supports both video and image backgrounds
// Full-viewport design with centered content
// ========================================

type BackgroundType = 'video' | 'image'

interface Props {
  // Content
  headline: string
  description?: string
  eyebrowText?: string
  ctaText?: string
  ctaLink?: string

  // Background configuration
  backgroundType?: BackgroundType
  backgroundSrc?: string
  backgroundAlt?: string
  backgroundPoster?: string  // Poster image for video (shown while loading)

  // Overlay configuration
  overlayOpacity?: 'light' | 'medium' | 'dark'

  // Floating elements
  showPhoneButton?: boolean
  phoneNumber?: string
  showScrollIndicator?: boolean

  // Footer ticker / logo marquee
  showTicker?: boolean
  tickerLogos?: Array<{ src: string; alt: string }>
}

const {
  // Content
  headline,
  description = '',
  eyebrowText = '',
  ctaText = 'Start your search',
  ctaLink = '/search',

  // Background - video is default
  backgroundType = 'video',
  backgroundSrc = 'https://videos.pexels.com/video-files/1918465/1918465-uhd_2560_1440_24fps.mp4',
  backgroundAlt = 'Hero background',
  backgroundPoster = '',

  // Overlay
  overlayOpacity = 'medium',

  // Floating elements
  showPhoneButton = true,
  phoneNumber = '+1234567890',
  showScrollIndicator = true,

  // Footer ticker
  showTicker = false,
  tickerLogos = [],
} = Astro.props

// Determine overlay class based on opacity setting
const overlayClass = `hero__overlay hero__overlay--${overlayOpacity}`
---

<section class="hero">
  <!-- Background with reveal animation -->
  <div class="hero__background">
    {backgroundType === 'video' ? (
      <video
        class="hero__background-video"
        autoplay
        muted
        loop
        playsinline
        poster={backgroundPoster}
      >
        <source src={backgroundSrc} type="video/mp4" />
      </video>
    ) : (
      <div
        class="hero__background-image"
        style={`background-image: url('${backgroundSrc}')`}
        role="img"
        aria-label={backgroundAlt}
      />
    )}
    <div class={overlayClass}></div>
  </div>

  <!-- Centered Content Container -->
  <div class="hero__content-wrapper">
    <div class="hero__content">
      <!-- Eyebrow Text -->
      {eyebrowText && (
        <span class="hero__eyebrow">{eyebrowText}</span>
      )}

      <!-- Main Headline -->
      <h1 class="hero__headline">
        {headline}
      </h1>

      <!-- Description -->
      {description && (
        <div class="hero__description" set:html={description} />
      )}

      <!-- CTA Button - Pill Shape -->
      {ctaText && ctaLink && (
        <a href={ctaLink} class="hero__cta">
          {ctaText}
        </a>
      )}
    </div>
  </div>

  <!-- Floating Utility: Phone Link (Bottom Right) -->
  <!-- {showPhoneButton && (
    <a href={`tel:${phoneNumber}`} class="hero__phone-btn" aria-label="Call us">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
      </svg>
      <span>{phoneNumber}</span>
    </a>
  )} -->

  <!-- Scroll Indicator -->
  {showScrollIndicator && (
    <div class="hero__scroll-indicator">
      <div class="hero__scroll-line"></div>
    </div>
  )}

  <!-- Footer Ticker / Logo Marquee -->
  {showTicker && tickerLogos.length > 0 && (
    <div class="hero__ticker">
      <div class="hero__ticker-track">
        <div class="hero__ticker-content">
          {tickerLogos.map((logo) => (
            <img
              src={logo.src}
              alt={logo.alt}
              class="hero__ticker-logo"
              loading="lazy"
            />
          ))}
          {/* Duplicate for seamless loop */}
          {tickerLogos.map((logo) => (
            <img
              src={logo.src}
              alt={logo.alt}
              class="hero__ticker-logo"
              loading="lazy"
              aria-hidden="true"
            />
          ))}
        </div>
      </div>
    </div>
  )}
</section>

<style lang="scss">
  @use '../styles/components/hero';
</style>
